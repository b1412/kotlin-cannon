os: linux
dist: trusty
jdk: openjdk8
script:
  - "./gradlew build"
  - "./gradlew jacocoTestReport"
services:
  - docker

after_success:
  - bash <(curl -s https://codecov.io/bash)
  - docker build -t $IMAGE_NAME .
  - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
  - docker tag $IMAGE_NAME:latest $DOCKER_USERNAME/$IMAGE_NAME:$TRAVIS_BUILD_NUMBER
  - docker push $DOCKER_USERNAME/$IMAGE_NAME:$TRAVIS_BUILD_NUMBER

env:
  global:
    - IMAGE_NAME=kotlin-cannon
    - secure: m11nyDjP98cETY2yGR7L7j5WGz+y/doruMPH1Cd7rJ5aE2HIngRR2ID0+0WObj11TcvA9V8PIHBN6cqaIBUtmbgqTVK42+LTXrLAqfRoGOMcV/CnHpaKbYaP7E/ns1u/hXMjTww2ber9Zg917ZAqkzCG5HFr7MtM84EcPsJ6X0gaTZtg5KQI98RUMb+fJ60NbxwtFuhgUobjoLZR5aTFcwE0ABjsoxEpEqar+WGhaQaZu2faNI8+buqnF80RGd7VKSM3NZUQQGILXayMk3CRIPeFtk4uUzWNo9tQHCegsrDvwLrF6roG38Wo39BtPYWIgFecWTmGZVpagSemtb/+dFCCjP1DS1pFKB7EEbCSSbZpeRN59YHaSh9efz4RyOQiDHz1D5mkKC4IyjwmYprltLwVCgp5GNZO+sKJ4leD69iRXwnuhIPWUOzwOGROZ9ucPqdjqB8Bd4fL1sTqftPEaD8gylzRziMVS0kZjrwPz4zSjXZ8S+kDnMt16aoitW4MyLhACxCav+FPLmNixLISDkZ3mnUs1gS+Oyirbm2A6t1d96lLKiz/urKR+ibxRyv41GeM3oB3PzZn6nSgufxHSg1hfPV/0m4LzhHWUs58LiRbdXR4iensOqQcQWp4Cp1L14xcIAMBuyf11BfWPMyMwxBud/lofMf5cnkt7AX5Qa4=
    - secure: TBviHn/ut3XM6JO/vj103Cb1mrN4A9Qds324jZ2CEJwFhJQCnmStdMV9IWg4QdFfSNYr8vf6+az7n7IF6ebcVeOpLP0f8UODdnnMF8pN1yyd/WVjlqnvS4Z3Z1HMvFdCzMV4I8nCSugah1mpowgLM+8a8hBGVzgGEi1SAEEqCXIoGeUxyLE3gBR9yDn0GKX+d1Ct1s33d64sGXZIeXAwRuSHu+CUHnMaKi1eAN1jXN6lTmXAeCakqEEGlIkEhSss+9WIxQjpoEenaL2fNcEie9wtMrjAB34+eP0Tepxq/5Yh0m0QD3+NFcRfi04fwxisvhT1zTU100N9Q+qbw1T10mv8XMD40qYOGEkVExTDCNXBausQc0f9fdp9cyHrbnM8CECYAwtv6vAj1h6WBdhs61MxYtI6bInI2dwgk5lorvV0oxJNctK7W6B6LSCpBOAhroTE8nW4IqPi5X4MK81Yx30OB4tMIcYR7XrtcEzGVQ8t1gcleLOOdaxyxVJ2P+MKAxokKS3pyFpxyYCwHpfgXDPKer+md+n0mFKrkn36DIawXGQgSjFQHZFeD2J2ihl0eMFtOxyq4dI/Sod4Hnl9xzh3HtNhIPhJtN9HPe9L3JwLlY2z1yFZPA+LfcXSHzFraB58YhPxCxCig+tKWnk3M5upzBjffMCnSyVUvWO5C18=
